<h2>Listado de Cursos</h2>

<div *ngIf="auth.getCurrentRole() === 'admin'" class="form-curso">
  <input matInput placeholder="Nombre del curso" [(ngModel)]="nuevoNombre" />
  <input matInput placeholder="Descripción" [(ngModel)]="nuevaDescripcion" />

  <button mat-raised-button color="primary" *ngIf="editId === null" (click)="agregarCurso()">
    Agregar
  </button>

  <button mat-raised-button color="accent" *ngIf="editId !== null" (click)="guardarEdicion()">
    Guardar
  </button>

  <button mat-raised-button color="warn" *ngIf="editId !== null" (click)="cancelarEdicion()">
    Cancelar
  </button>
</div>

<ng-container *ngIf="cursos$ | async as cursos">
  <table mat-table [dataSource]="cursos" class="mat-elevation-z8 tabla">

    <!-- ID -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let curso"> {{ curso.id }} </td>
    </ng-container>

    <!-- Nombre -->
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef> Nombre </th>
      <td mat-cell *matCellDef="let curso"> {{ curso.nombre }} </td>
    </ng-container>

    <!-- Descripción -->
    <ng-container matColumnDef="descripcion">
      <th mat-header-cell *matHeaderCellDef> Descripción </th>
      <td mat-cell *matCellDef="let curso"> {{ curso.descripcion }} </td>
    </ng-container>

    <!-- Acciones -->
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef> Acciones </th>
      <td mat-cell *matCellDef="let curso">
        <button mat-button color="primary" *ngIf="auth.getCurrentRole() === 'admin'" (click)="editarCurso(curso)">
          Editar
        </button>
        <button mat-button color="warn" *ngIf="auth.getCurrentRole() === 'admin'" (click)="eliminarCurso(curso.id)">
          Eliminar
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <div *ngIf="cursos.length === 0" class="sin-datos">
    No hay cursos para mostrar.
  </div>
</ng-container>
